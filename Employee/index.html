<!DOCTYPE html>
<html lang="en" ng-app="Employees">
<head>
  <title>Bootstrap Case</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>


  <script src="js/app.js"></script>
  <!--link rel="stylesheet" href="css/globalStyles.css"-->
   <script type="text/javascript">  
        var isHtml5Compatible = document.createElement('canvas').getContext != undefined;  
  
        if (isHtml5Compatible) {  
            initiateLocalStorage();  
  
        }  
  
        function initiateLocalStorage() {  
            // Create the AngularJS app   
            var app = angular.module('Employees', ['storageService','Employees1']);  
  
            // Create the Controller  
            app.controller('EmployeesController', ['$scope', 'getLocalStorage', function ($scope, getLocalStorage) {  
                $scope.appTitle = "LocalStorage Example";  
                $scope.appHeadline = "AngularJS and HTML5";  
  
                //Read the Employee List from LocalStorage  
                $scope.employees = getLocalStorage.getEmployees();  
  
                //Count the Employee List  
                $scope.count = $scope.employees.length;

                //toggle                  
                 // viewEmployee  = false;
  
                //Add Employee - using AngularJS push to add Employee in the Employee Object  
                //Call Update Employee to update the locally stored Employee List  
                //Reset the AngularJS Employee scope  
                //Update the Count  
                $scope.addEmployee = function () {  
                    $scope.employees.push({ 'empno': $scope.empno, 'empname': $scope.empname, 'empsalary': $scope.empsalary,'showEmployee':false });  
                    getLocalStorage.updateEmployees($scope.employees);  
                    $scope.empno = '';  
                    $scope.empname = '';  
                    $scope.empsalary = '';  
                    $scope.count = $scope.employees.length; 

                };  
  
                //Delete Employee - Using AngularJS splice to remove the emp row from the Employee list  
                //All the Update Employee to update the locally stored Employee List  
                //Update the Count  
                $scope.deleteEmployee = function (emp) {  
                    $scope.employees.splice($scope.employees.indexOf(emp), 1);  
                    getLocalStorage.updateEmployees($scope.employees);  
                    $scope.count = $scope.employees.length;  
                }; 
                $scope.modify = function(emp){
                    emp.showEmployee = !emp.showEmployee;
              }; 
              $scope.update = function(emp){
                  emp.showEmployee = false;                             
                  getLocalStorage.updateEmployees($scope.employees); 
              };
            }]);  
  
            //Create the Storage Service Module  
            //Create getLocalStorage service to access UpdateEmployees and getEmployees method  
            var storageService = angular.module('storageService', []);  
            storageService.factory('getLocalStorage', function () {  
                var employeeList = {};  
                return {  
                    list: employeeList,  
                    updateEmployees: function (EmployeesArr) {                       
                        if (window.localStorage && EmployeesArr) {  
                            //Local Storage to add Data  
                            localStorage.setItem("employees", angular.toJson(EmployeesArr));  
                        }  
                        employeeList = EmployeesArr; 
                    },  
                    getEmployees: function () {  
                        //Get data from Local Storage  
                        employeeList = angular.fromJson(localStorage.getItem("employees"));                          
                        return employeeList ? employeeList : [];  
                    },
                    
                };  
  
            });  
        }  
     

    angular.module('EmployeeModify', []).
    controller('modifyCtrl', ['$scope', function($scope){
      $scope.tabelsData= [
        {'name':'rohit', 'dob':'15-august-1985', 'emailId':'rohit@rohit.com', 'phone':'9999999999', 'address':'Delhi Rohini', 'id':'0' },
        {'name':'aman', 'dob':'26-july-1975', 'emailId':'haryanat@hr.com', 'phone':'9874563210', 'address':'Haryana Sonepat', 'id':'1' },
        {'name':'devraj', 'dob':'27-march-1980', 'emailId':'punjab@punjab.com', 'phone':'7410258963', 'address':'Punjab AmritSar', 'id':'2' }
      ];


      $scope.modify = function(tableData){

        $scope.modifyField = true;
        $scope.viewField = true;
      };


      $scope.update = function(tableData){
        $scope.modifyField = false;
        $scope.viewField = false;
      };

    }]);
    </script> 

<style>
td {padding:10px;}
</style>
  
</head>
<body style="margin:0 auto;">
<nav id="header-nav" class="navbar navbar-default" style="margin:0 auto;position:relative;margin-bottom: 0 !important">
  <div class="container-fluid">
    <div class="navbar-header" style="background: url(images/global.png) no-repeat;background-size: auto auto;background-position: 0 -264px;">
      <a class="navbar-brand" href="#" style="padding: 15px 142px;"></a>
    </div>    
    <div>
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Global Navigation</a></li>
        <li><a href="#">Banking Topics</a></li>
        <li><a href="#">Find an ATM</a></li>
        <li><a href="#">Register Now</a></li>
        <li><a href="#">Discover Products</a></li>
      </ul>
    </div>
  </div>
</nav>

<nav id="global-nav" ng-controller="navCtrl" class="navbar navbar-default" >
  <div class="container-fluid"  style="color:white;background:#ff6000;">
    <div class="navbar-header">
      <a class="navbar-brand" href="#"></a>
    </div>
      <ul class="nav navbar-nav" >
        <li class="prod-dropdown" ng-repeat="menu in menus">
            <a style="color:white;" ng-href="#/{{menu.description['url']}}" ng-class="{'dropdown-toggle': menu.menus}" class="dropdown-toggle" data-toggle="dropdown">
                {{menu.description['name'] | uppercase}} <span ng-if="menu.childs" class="caret"></span>
            </a>
            <ul ng-if="menu.childs" class="dropdown-menu multi-level" role="menu" aria-labelledby="dropdownMenu">
                <li class="dropdown-submenu" ng-repeat="submenu in menu.childs">
                    <a tabindex="-1" ng-href="#/{{submenu.description['url']}}">{{submenu.description['name']}}</a>
                    <ul class="dropdown-menu" ng-if="submenu.childs">
                        <li class="dropdown-submenu" ng-repeat="subofsub in submenu.childs">
                            <a ng-href="#/{{subofsub.description['url']}}">{{subofsub.description['name']}}</a>
                        </li>
                    </ul>
                </li>
            </ul>
          </li>      
      </ul>
    </div>
</nav>
  
<div class="container">
 
<div ng-controller="EmployeesController">  
 <h3>{{appTitle}}</h3>
  <p>{{appHeadline}}</p>
  <form name="frm">    
   <table cellpadding="4" cellspacing="4" border="1" style="border-collapse: collapse; border:solid 1px gray;width:50%">    
       <tr>    
           <td width="20%">Emp No   :      
           </td>    
           <td>    
               <input type="text" name="empno" ng-model="empno" required><br />    
           </td>    
       </tr>    
       <tr>    
           <td>Emp Name   :    
  
           </td>    
           <td>    
               <input type="text" name="empname" ng-model="empname" required>    
           </td>    
       </tr>    
       <tr>    
           <td>Emp Salary   :   
           </td>    
           <td>    
               <input type="text" name="empsalary" ng-model="empsalary">    
           </td>    
       </tr>    
       <tr>    
           <td colspan="2" align="right" style="background:gray">    
  
               <button ng-click="addEmployee()" ng-disabled="frm.$invalid" style="background:#ff6000;color:white;padding:5px;border-radius:8px;">Add Employee</button>    
           </td>    
  
       </tr>    
   </table> 
   <table cellpadding="4" cellspacing="4" border="1" style="margin-top:20px;border-collapse: collapse; border: solid 1px gray">    
    <tr>    
        <td></td>  
        <td><b>Emp No</b></td>    
        <td><b>Emp Name</b></td>    
        <td><b>Emp Salary</b></td>    
        <td><b>Action</b></td>    
    </tr>    
    <tr ng-repeat="employee in employees">  
        <td><input type="checkbox" value="" /></td>    
        <td>{{employee.empno}}
        </td>
        <td><span ng-hide="employee.showEmployee" ng-bind="employee.empname"></span>
        <input ng-show="employee.showEmployee" ng-model="employee.empname" />
        </td>
        <td><span ng-hide="employee.showEmployee" ng-bind="employee.empsalary"></span>
        <input ng-show="employee.showEmployee" ng-model="employee.empsalary" />
        </td>    
        <td>           
            <button ng-click="deleteEmployee(employee)" style="background:#ff6000;color:white;padding:5px;border-radius:8px;">Delete</button>
            <button ng-hide="employee.showEmployee" ng-click="modify(employee)" style="background:#ff6000;color:white;padding:5px;border-radius:8px;">Modify</button>
            <button ng-show="employee.showEmployee" ng-click="update(employee)" style="background:#ff6000;color:white;padding:5px;border-radius:8px;">Update</button>
        </td>    
    </tr>     
  
</table>    
<div style="padding:20px 0;">Total Employees : {{count}}</div>    
</div>       
</form>
</div>
<!--
<div class="wraper" ng-controller="modifyCtrl">

            <table>
                <thead>
                    <tr>
                        <th>Name:</th>
                        <th>Date Of Birth</th>
                        <th>Email Id</th>
                        <th>Phone No.</th>
                        <th>Address</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="tableData in tabelsData"><form>
                        <td>
                            <div ng-hide="viewField">{{tableData.name | uppercase}}</div>
                            <div ng-show="modifyField"><input type="text" ng-model="tableData.name" /></div>
                        </td>
                        <td>
                            <div ng-hide="viewField">{{tableData.dob}}</div>
                            <div ng-show="modifyField"><input type="text" ng-model="tableData.dob" /></div>
                        </td>
                        <td>
                            <div ng-hide="viewField">{{tableData.emailId}}</div>
                            <div ng-show="modifyField"><input type="text" ng-model="tableData.emailId" /></div>
                        </td>
                        <td>
                            <div ng-hide="viewField">{{tableData.phone}}</div>
                            <div ng-show="modifyField"><input type="text" ng-model="tableData.phone" /></div>
                        </td>
                        <td>
                            <div ng-hide="viewField">{{tableData.address}}</div>
                            <div ng-show="modifyField">
                                <textarea ng-model="tableData.address"></textarea>
                            </div>
                        </td>
                        <td>
                            <button ng-hide="viewField" ng-click="modify(tableData)">Modify</button>
                            <button ng-show="modifyField" ng-click="update(tableData)">Update</button>
                            <button ng-hide="viewField">Add</button>
                            <button ng-hide="viewField">Remove</button>
                        </td></form>
                    </tr>
                </tbody>
            </table>

        </div>-->
</body>

</html>
